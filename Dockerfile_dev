# FROM metacell/jupyter-neuron:latest
FROM frodriguez4600/jupyter-neuron:latest
USER $NB_USER

ARG netpyneuiBranch=development 
ENV netpyneuiBranch=${netpyneuiBranch}  
RUN echo "$netpyneuiBranch";

ENV FOLDER=NetPyNE-UI
WORKDIR /home/jovyan/work

COPY --chown=1000:1000 . NetPyNE-UI
WORKDIR ${FOLDER}/utilities

RUN python install.py branch $netpyneuiBranch

WORKDIR /home/jovyan/work/NetPyNE-UI

RUN git clone https://github.com/Neurosim-lab/netpyne_workspace && rm -rf netpyne_workspace/.git
WORKDIR /home/jovyan/work/NetPyNE-UI/netpyne_workspace

RUN ln -sfn /home/jovyan/work/NetPyNE-UI/netpyne_ui/tests ../tests
CMD /bin/bash -c "cd .. && NetPyNE-UI"